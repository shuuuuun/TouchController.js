"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),_eventemitter=require("eventemitter2"),TouchController=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,e);var o=_possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this));return o.element=t.element||document,o.touchstartElement=t.touchstartElement||o.element,o.touchmoveElement=t.touchmoveElement||o.element,o.touchendElement=t.touchendElement||o.element,o.doubleTapDelay=t.doubleTapDelay||500,o.holdingDelay=t.holdingDelay||1e3,o.watchInterval=t.watchInterval||100,o.touchSupport="ontouchstart"in window,o.touchstart=o.touchSupport?"touchstart":"mousedown",o.touchmove=o.touchSupport?"touchmove":"mousemove",o.touchend=o.touchSupport?"touchend":"mouseup",o.deltaX=0,o.deltaY=0,o.moveX=0,o.moveY=0,o.defineEventListener(),o.setEvent(),o}return _inherits(e,t),_createClass(e,[{key:"setEvent",value:function(){this.touchstartElement.addEventListener(this.touchstart,this.onTouchStart,!1),this.touchmoveElement.addEventListener(this.touchmove,this.onTouchMove,!1),this.touchendElement.addEventListener(this.touchend,this.onTouchEnd,!1)}},{key:"dispose",value:function(){this.touchstartElement.removeEventListener(this.touchstart,this.onTouchStart,!1),this.touchmoveElement.removeEventListener(this.touchmove,this.onTouchMove,!1),this.touchendElement.removeEventListener(this.touchend,this.onTouchEnd,!1)}},{key:"defineEventListener",value:function(){var t=this,e=void 0,o=void 0;this.onTouchStart=function(o){o.preventDefault(),o.stopPropagation(),t.isDoubleTap=t.isTap,t.isDragging=!0,t.isTap=!0,t.touchStartTime=Date.now(),t.touchStartX=t.touchSupport?o.touches[0].pageX:o.pageX,t.touchStartY=t.touchSupport?o.touches[0].pageY:o.pageY,setTimeout(function(){clearInterval(e),e=setInterval(function(){t.isTouchMoving||(console.log("touchholding"),t.emit("touchholding",t))},t.watchInterval)},t.holdingDelay),t.emit("touchstart",{touchStartTime:t.touchStartTime,touchStartX:t.touchStartX,touchStartY:t.touchStartY})},this.onTouchMove=function(e){t.isDragging&&(t.isTouchMoving=!0,clearTimeout(o),o=setTimeout(function(){t.isTouchMoving=!1},t.holdingDelay),t.lasttouchX=t.touchX||t.touchStartX,t.lasttouchY=t.touchY||t.touchStartY,t.touchX=t.touchSupport?e.touches[0].pageX:e.pageX,t.touchY=t.touchSupport?e.touches[0].pageY:e.pageY,t.deltaX=t.touchX-t.lasttouchX,t.deltaY=t.touchY-t.lasttouchY,t.moveX=t.touchX-t.touchStartX,t.moveY=t.touchY-t.touchStartY,t.isTap=t.isDoubleTap=!1,t.emit("touchmove",{lasttouchX:t.lasttouchX,lasttouchY:t.lasttouchY,touchX:t.touchX,touchY:t.touchY,deltaX:t.deltaX,deltaY:t.deltaY,moveX:t.moveX,moveY:t.moveY}))},this.onTouchEnd=function(o){t.isDragging=!1,t.isTouchMoving=!1,clearInterval(e),t.elapsedTime=Date.now()-t.touchStartTime,t.touchEndX=t.touchX,t.touchEndY=t.touchY,t.emit("touchend",{elapsedTime:t.elapsedTime,touchEndX:t.touchEndX,touchEndY:t.touchEndY,moveX:t.moveX,moveY:t.moveY,isTap:t.isTap,isDoubleTap:t.isDoubleTap}),t.touchX=t.touchY=null,t.moveX=t.moveY=0,setTimeout(function(){t.isTap=t.isDoubleTap=!1},t.doubleTapDelay)}}}]),e}(_eventemitter.EventEmitter2);exports["default"]=TouchController;